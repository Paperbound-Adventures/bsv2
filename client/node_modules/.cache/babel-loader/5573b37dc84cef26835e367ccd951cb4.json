{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jonchristie/Desktop/WEB_DEV_DOCS/Book-Search/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/jonchristie/Desktop/WEB_DEV_DOCS/Book-Search/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/jonchristie/Desktop/WEB_DEV_DOCS/Book-Search/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/jonchristie/Desktop/WEB_DEV_DOCS/Book-Search/client/src/pages/Saved.js\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Col, Row, Container } from \"../components/Grid\";\nimport API from \"../utils/API\";\n\nvar Saved = function Saved() {\n  // Setting our component's initial state\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      books = _useState2[0],\n      setBooks = _useState2[1]; // Loads all saved books and sets them to books\n\n\n  var loadSavedBooks = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var saved;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return API.getSavedBooks();\n\n            case 3:\n              saved = _context.sent;\n              setBooks(saved.data);\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              throw _context.t0;\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function loadSavedBooks() {\n      return _ref.apply(this, arguments);\n    };\n  }(); // Loads all books\n\n\n  useEffect(function () {\n    loadSavedBooks();\n  }, [books]); // Deletes a book from the database with a given id, then reloads books from the db\n\n  var handleDeleteBook = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id) {\n      var savedBooks;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return API.deleteBook(id);\n\n            case 3:\n              savedBooks = books.filter(function (book) {\n                return book.id !== id;\n              });\n              setBooks(savedBooks);\n              _context2.next = 10;\n              break;\n\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](0);\n              throw _context2.t0;\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 7]]);\n    }));\n\n    return function handleDeleteBook(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    size: \"md-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }\n  }, \"\\u2190 Back to Search\")), /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }, books.length ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row row-cols-3\",\n    style: {\n      justifyContent: 'center'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 11\n    }\n  }, books.map(function (book) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: book._id,\n      className: \"card col-sm-3\",\n      style: {\n        margin: '5px'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: book.image ? book.image : 'http://icons.iconarchive.com/icons/paomedia/small-n-flat/128/book-icon.png',\n      className: \"card-img-top\",\n      style: {\n        height: 300\n      },\n      alt: \"...\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"card-title\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }\n    }, book.title), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"card-text\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }\n    }, book.description ? book.description.length >= 200 ? book.description.slice(0, 200) : book.description : 'No Description Available'), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-dark\",\n      onClick: function onClick() {\n        return handleDeleteBook(book._id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }\n    }, \"Delete\"), /*#__PURE__*/React.createElement(\"a\", {\n      href: book.link,\n      rel: \"noopener noreferrer\",\n      target: '_blank',\n      className: \"card-link\",\n      style: {\n        padding: '20px',\n        textAlign: 'center'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }\n    }, \"Book Link\")));\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: '20px',\n      textAlign: 'center'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, \"No Results to Display\"))));\n};\n\nexport default Saved;","map":{"version":3,"sources":["/Users/jonchristie/Desktop/WEB_DEV_DOCS/Book-Search/client/src/pages/Saved.js"],"names":["React","useState","useEffect","Link","Col","Row","Container","API","Saved","books","setBooks","loadSavedBooks","getSavedBooks","saved","data","handleDeleteBook","id","deleteBook","savedBooks","filter","book","length","justifyContent","map","_id","margin","image","height","title","description","slice","link","padding","textAlign"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Col, Row, Container } from \"../components/Grid\";\nimport API from \"../utils/API\"\n\nconst Saved = () => {\n  // Setting our component's initial state\n  const [books, setBooks] = useState([]);\n\n\n  // Loads all saved books and sets them to books\n  const loadSavedBooks = async () => {\n      try {\n          const saved = await API.getSavedBooks();\n          setBooks(saved.data);\n      } catch (err) {\n          throw err;\n      }\n  }\n\n  // Loads all books\n  useEffect(() => {\n      loadSavedBooks();\n  }, [books]);\n\n   // Deletes a book from the database with a given id, then reloads books from the db\n  const handleDeleteBook = async (id) => {\n      try {\n          await API.deleteBook(id)\n          const savedBooks = books.filter(book => book.id !== id);\n          setBooks(savedBooks);\n      } catch (err) {\n          throw err;\n      }\n  }\n\n  return (\n    <Container fluid>\n      <Col size=\"md-2\">\n            <Link to=\"/\">← Back to Search</Link>\n          </Col>\n      <Row>\n        {books.length ? (\n          <div\n            className='row row-cols-3'\n            style={{ justifyContent: 'center' }}\n          >\n            {books.map((book) => {\n              return (\n                <div\n                  key={book._id}\n                  className='card col-sm-3'\n                  style={{ margin: '5px' }}\n                >\n                  <img\n                    src={\n                      book.image\n                        ? book.image\n                        : 'http://icons.iconarchive.com/icons/paomedia/small-n-flat/128/book-icon.png'\n                    }\n                    className='card-img-top'\n                    style={{ height: 300 }}\n                    alt='...'\n                  ></img>\n                  <div className='card-body'>\n                    <h5 className='card-title'>{book.title}</h5>\n                    <p className='card-text'>\n                      {book.description\n                        ? book.description.length >= 200\n                          ? book.description.slice(0, 200)\n                          : book.description\n                        : 'No Description Available'}\n                    </p>\n                    <button\n                      className='btn btn-dark'\n                      onClick={() => handleDeleteBook(book._id)}\n                    >\n                      Delete\n                    </button>\n                    <a\n                      href={book.link}\n                      rel='noopener noreferrer'\n                      target={'_blank'}\n                      className='card-link'\n                      style={{ padding: '20px', textAlign: 'center' }}\n                    >\n                      Book Link\n                    </a>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        ) : (\n          <div style={{ padding: '20px', textAlign: 'center' }}>\n            <h5>No Results to Display</h5>\n          </div>\n        )}\n      </Row>\n    </Container>\n  );\n}\n\nexport default Saved;"]},"metadata":{},"sourceType":"module"}